#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "üîç Pre-commit validation..."

# Option 1: SKIP ALL CHECKS (maximum speed)
# Uncomment to disable pre-commit checks entirely:
# echo "‚ö° Skipping validation (disabled in hook)"
# exit 0

# Option 2: FORMAT ONLY (no tests)
# Fast auto-format, no test execution
echo "üîß Auto-formatting code..."
dotnet format src/Darklands.Core/Darklands.Core.csproj --verbosity quiet 2>/dev/null
git add -u 2>/dev/null
echo "‚úÖ Code formatted"
exit 0

# Option 3: FULL VALIDATION (original behavior - commented out)
# Uncomment the block below to restore tests:
# echo "Running Core tests..."
# dotnet test tests/Darklands.Core.Tests/Darklands.Core.Tests.csproj --no-build --verbosity minimal
# if [ $? -ne 0 ]; then
#     echo "‚ùå Tests failed"
#     exit 1
# fi
# echo "‚úÖ Pre-commit validation passed!"